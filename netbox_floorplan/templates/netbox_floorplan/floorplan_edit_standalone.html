<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Floorplan - {{ obj }}</title>
    {% load static %}

    {# Fabric.js dependency #}
    <script src="{% static 'netbox_floorplan/vendors/fabric-js-6.0.2.js' %}"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        .header {
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            padding: 15px 20px;
        }
        .header a {
            color: #0066cc;
            text-decoration: none;
        }
        .header a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    {# Simple header with back link #}
    <div class="header">
        <a href="{{ request.META.HTTP_REFERER|default:'/' }}">‚Üê Back</a>
        | Edit Floorplan: {{ obj }}
    </div>

    {# Data injection for React #}
    <div id="floorplan-data"
         data-floorplan-id="{{ obj.pk }}"
         data-site-id="{% if site %}{{ site.id }}{% endif %}"
         data-location-id="{% if location %}{{ location.id }}{% endif %}"
         data-record-type="{{ record_type }}"
         data-csrf-token="{{ csrf_token }}"
         style="display: none;">
    </div>

    {# React mount point - no NetBox interference #}
    <div id="content-container">
        <div id="floorplan-editor-root"></div>
    </div>

    {# Load React app #}
    <script type="module" src="{% static 'netbox_floorplan/dist/editor.js' %}"></script>
</body>
</html>
